# 개발일지 - 관심 종목/즐겨찾기 기능

**작성 시각**: 2025-12-10

## 해결하고자 한 문제

관심 종목/즐겨찾기 기능 추가 및 로컬스토리지 저장

### 요구사항
1. 즐겨찾기 추가/제거 (별 아이콘, 토스트 알림, 최대 50개 제한)
2. 즐겨찾기 목록 UI (관심 종목 메뉴, 종목 정보 표시)
3. 정렬 및 순서 변경 (등록순/종목명순/등락률순/거래량순)
4. 로컬스토리지 구조 (JSON 형식)
5. 일괄 관리 (전체 선택, 선택 삭제, 전체 삭제)
6. 검색 및 빠른 추가
7. 내보내기/가져오기 (JSON)
8. 성능 최적화 및 접근성

## 해결된 것

✅ **타입 정의**
- `types/index.ts`:
  - `FavoriteStock`: 즐겨찾기 종목 정보
  - `FavoriteSettings`: 즐겨찾기 설정 (정렬 방식, 최대 개수)
  - `FavoriteData`: 전체 즐겨찾기 데이터 구조
  - `FavoriteSortBy`: 정렬 타입 정의

✅ **로컬스토리지 관리 유틸리티**
- `utils/favoriteStorage.ts`:
  - `getFavoriteData`: 즐겨찾기 데이터 불러오기
  - `saveFavoriteData`: 즐겨찾기 데이터 저장 (용량 초과 시 세션스토리지 대체)
  - `addFavorite`: 즐겨찾기 추가 (중복 확인, 최대 개수 확인)
  - `removeFavorite`: 즐겨찾기 제거
  - `removeFavorites`: 여러 항목 일괄 삭제
  - `reorderFavorites`: 순서 변경
  - `changeFavoriteGroup`: 그룹 변경
  - `updateFavoriteSettings`: 설정 업데이트
  - `isFavorite`: 즐겨찾기 여부 확인
  - `exportFavorites`: JSON 내보내기
  - `importFavorites`: JSON 가져오기
  - `copySymbolsToClipboard`: 클립보드 복사
  - `clearAllFavorites`: 전체 삭제

✅ **즐겨찾기 아이콘 컴포넌트**
- `components/FavoriteIcon.tsx`:
  - 별 아이콘 (⭐ / ☆)
  - 클릭 시 즉시 추가/제거
  - 토스트 알림 표시
  - 상태 동기화
  - 다양한 크기 지원 (sm/md/lg)
  - 텍스트 표시 옵션

✅ **즐겨찾기 목록 컴포넌트**
- `components/FavoriteList.tsx`:
  - 관심 종목 목록 표시
  - 종목명, 현재가, 등락률 표시
  - 빈 상태 안내 메시지
  - 정렬 옵션 (등록순/종목명순/등락률순/거래량순)
  - 전체 선택/해제
  - 선택 항목 일괄 삭제
  - 전체 삭제 (확인 모달)
  - 개별 삭제 버튼
  - 종목 상세 페이지 링크

✅ **컴포넌트 통합**
- `components/StockCard.tsx`: 즐겨찾기 아이콘 추가
- `components/Top3ComparisonCard.tsx`: 즐겨찾기 아이콘 추가
- `app/page.tsx`: 관심 종목 섹션 추가

## 해결되지 않은 것 / 향후 개선 필요

⚠️ **드래그 앤 드롭 순서 변경**
- 현재는 정렬만 지원
- 드래그 앤 드롭으로 순서 변경 기능 미구현
- `react-beautiful-dnd` 또는 `@dnd-kit` 라이브러리 사용 고려

⚠️ **그룹/폴더 관리**
- 그룹 필드는 있으나 UI 미구현
- 그룹 생성/수정/삭제 기능 필요
- 그룹별 필터링 기능 필요

⚠️ **검색 및 빠른 추가 모달**
- 현재는 기존 종목에만 즐겨찾기 추가 가능
- 종목 검색 모달/드롭다운 미구현
- 자동완성 기능 미구현

⚠️ **내보내기/가져오기 UI**
- 함수는 구현되어 있으나 UI 미구현
- JSON 파일 다운로드/업로드 버튼 필요
- CSV 형식 지원 미구현

⚠️ **알림 연동**
- 즐겨찾기 종목 가격 알림 설정 연동 미구현
- 관심 종목 변동 시 배지/알림 미구현

⚠️ **성능 최적화**
- 대량 종목 등록 시 가상 스크롤 미구현
- 로컬스토리지 크기 모니터링 미구현
- 디바운싱 적용 미구현

⚠️ **사용자 분석**
- 가장 많이 추가된 종목 TOP 10 미구현
- 통계 기능 미구현

## 기술적 세부사항

- **로컬스토리지 구조**:
  ```json
  {
    "favorites": [
      {
        "id": "TSLA",
        "name": "Tesla, Inc.",
        "addedAt": "2025-12-10T10:30:00Z",
        "order": 1,
        "group": "기본"
      }
    ],
    "settings": {
      "sortBy": "order",
      "maxItems": 50
    }
  }
  ```

- **에러 처리**: 로컬스토리지 용량 초과 시 세션스토리지로 대체
- **상태 관리**: React useState와 useEffect로 상태 동기화
- **토스트 알림**: 기존 Toast 컴포넌트 활용

## 향후 개발을 위한 컨텍스트

1. **로컬스토리지 관리**: `utils/favoriteStorage.ts`에서 중앙 관리
2. **즐겨찾기 아이콘**: `FavoriteIcon` 컴포넌트를 어디서든 재사용 가능
3. **확장 가능성**:
   - 드래그 앤 드롭 라이브러리 추가 시 순서 변경 기능 구현 가능
   - 그룹 관리 UI 추가 가능
   - 검색 모달 추가 가능
   - 내보내기/가져오기 UI 추가 가능

## 다음 단계

1. 드래그 앤 드롭 순서 변경 기능 구현
2. 그룹/폴더 관리 UI 구현
3. 종목 검색 모달 구현
4. 내보내기/가져오기 UI 구현
5. 알림 연동 기능 구현
6. 가상 스크롤 구현 (대량 데이터 대응)


# 개발일지 - 애니메이션 및 테마 전환 효과

**작성 시각**: 2025-12-10

## 해결하고자 한 문제
- 숫자 데이터(주가, 변동률, 거래량 등)가 동적으로 카운팅되며 표시되어 시각적 몰입감 제공
- 브리핑 카드 전환 시 부드러운 애니메이션으로 프리미엄 UX 구현
- 테마 전환 시 해가 뜨고 지는 것 같은 자연스러운 그라데이션 전환 효과
- 사용자의 시선을 중요한 수치 변화에 집중시켜 정보 인지율 향상

## 해결된 것
✅ **숫자 카운팅 애니메이션**
- `useCountUp` 훅 생성 (CountUp.js 기반)
- `AnimatedNumber` 컴포넌트 생성
- 스크롤 기반 트리거 (Intersection Observer)
- 애니메이션 속도: 1.5~2초 (설정 가능)
- Easing: ease-out (cubic-bezier)
- 포맷팅: 소수점, 천 단위 콤마, prefix/suffix 지원

✅ **카드 전환 애니메이션**
- `AnimatedCard` 컴포넌트 생성 (Framer Motion 기반)
- 전환 효과: fade, up, down, left, right, scale
- 순차 애니메이션: 각 카드에 100~150ms 딜레이
- 호버 효과: scale 1.02 확대
- 클릭 피드백: scale 0.98 축소

✅ **적용된 컴포넌트**
- `StockCard`: 주가, 변동률, 거래량, 시가총액, 복합 점수 카운팅
- `BriefingCard`: 위에서 아래로 페이드 인, 핵심 포인트 개수 카운팅
- `Top3ComparisonCard`: 스케일 애니메이션, 모든 수치 카운팅

✅ **테마 전환 효과**
- `ThemeTransition` 컴포넌트 생성
- 다크 → 라이트: 해가 뜨는 효과 (하단에서 상단으로 주황색/노란색 그라데이션)
- 라이트 → 다크: 해가 지는 효과 (상단에서 하단으로 파란색/보라색 그라데이션)
- 별이 나타나는 효과 (라이트 → 다크 전환 시)
- 애니메이션 지속 시간: 0.8초 (해 이동) + 0.3초 (페이드)

✅ **스크롤 애니메이션**
- `useScrollAnimation` 훅 생성
- Intersection Observer 기반
- 한 번만 실행 또는 반복 설정 가능
- 순차적 애니메이션: 요소별 딜레이 지원

✅ **접근성**
- `prefers-reduced-motion` 감지 및 애니메이션 비활성화
- 스크린 리더: 최종 값만 읽기
- 키보드 네비게이션: 기존 기능 유지

✅ **성능 최적화**
- GPU 가속: transform, opacity 사용
- will-change 속성 적용
- 한 번만 실행: triggerOnce 옵션
- 에러 처리: 애니메이션 실패 시 최종 값 표시

## 해결되지 않은 것 / 향후 개선 필요
⚠️ **저사양 기기 감지**
- 현재는 `prefers-reduced-motion`만 감지
- 실제 기기 성능 감지 및 애니메이션 단순화 미구현

⚠️ **동시 실행 애니메이션 제한**
- 최대 5개 제한 로직 미구현
- 많은 요소가 동시에 애니메이션될 때 성능 이슈 가능

⚠️ **설정 메뉴**
- 사용자가 애니메이션 on/off 토글할 수 있는 설정 메뉴 미구현

## 기술적 세부사항

### 사용한 기술/라이브러리
- **countup.js**: 숫자 카운팅 애니메이션 라이브러리
- **framer-motion**: React 애니메이션 라이브러리
- **Intersection Observer API**: 스크롤 애니메이션 감지

### 주요 파일 구조
```
hooks/
  ├── useCountUp.ts          # 숫자 카운팅 훅
  └── useScrollAnimation.ts  # 스크롤 애니메이션 훅

components/
  ├── AnimatedNumber.tsx     # 숫자 카운팅 컴포넌트
  ├── AnimatedCard.tsx       # 카드 전환 애니메이션 컴포넌트
  └── ThemeTransition.tsx    # 테마 전환 효과 컴포넌트
```

### 애니메이션 전략
- **숫자 카운팅**: CountUp.js의 easing 함수 커스터마이징
- **카드 전환**: Framer Motion의 motion 컴포넌트 사용
- **테마 전환**: Framer Motion의 AnimatePresence 사용
- **성능**: GPU 가속 속성만 사용 (transform, opacity)

### 접근성 고려사항
- `prefers-reduced-motion` 미디어 쿼리 감지
- 애니메이션 비활성화 시 즉시 최종 값 표시
- 스크린 리더를 위한 aria-label 유지

## 향후 개발을 위한 컨텍스트

### 다음 개발자가 알아야 할 정보
1. **애니메이션 비활성화**: 시스템 설정에서 애니메이션을 줄이도록 설정한 사용자는 자동으로 애니메이션이 비활성화됩니다.

2. **카운팅 애니메이션**: `AnimatedNumber` 컴포넌트는 자동으로 스크롤 감지 후 애니메이션을 시작합니다.
   - `autoStart={false}`로 수동 제어 가능
   - `formatValue` prop으로 커스텀 포맷팅 가능

3. **카드 애니메이션**: `AnimatedCard` 컴포넌트는 다양한 방향 지원
   - `direction`: 'up', 'down', 'left', 'right', 'fade', 'scale'
   - `delay`: 순차 애니메이션을 위한 딜레이 (밀리초)

4. **테마 전환 효과**: `ThemeTransition` 컴포넌트는 `ThemeProvider` 내부에 배치되어야 합니다.
   - 테마 변경 시 자동으로 트리거됨
   - 초기 마운트 시에는 애니메이션 실행하지 않음

5. **성능 최적화**: 많은 애니메이션이 동시에 실행될 때 성능 이슈가 발생할 수 있습니다.
   - 필요시 동시 실행 제한 로직 추가 고려
   - 저사양 기기 감지 및 애니메이션 단순화 고려

### 확장 가능성
- 사용자 설정에서 애니메이션 on/off 토글
- 애니메이션 속도 조절 (빠름/보통/느림)
- 더 많은 애니메이션 효과 추가
- 페이지 전환 애니메이션
- 로딩 스켈레톤 애니메이션



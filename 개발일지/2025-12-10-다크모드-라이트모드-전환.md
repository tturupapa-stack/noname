# 개발일지 - 다크 모드/라이트 모드 전환 기능

**작성 시각**: 2025-12-10

## 해결하고자 한 문제

다크 모드와 라이트 모드를 전환할 수 있는 기능 추가

### 요구사항
1. 헤더에 토글 스위치 배치
2. 아이콘: 🌙 (다크) / ☀️ (라이트)
3. 시스템 설정 감지 (prefers-color-scheme)
4. 로컬스토리지에 선택값 저장
5. 전환 시 부드러운 애니메이션

## 해결된 것

✅ **테마 컨텍스트 및 프로바이더**
- `contexts/ThemeContext.tsx`:
  - 시스템 설정 감지
  - 로컬스토리지 저장/불러오기
  - HTML 클래스 업데이트
  - 시스템 테마 변경 감지

✅ **테마 토글 컴포넌트**
- `components/ThemeToggle.tsx`:
  - 헤더에 배치
  - 아이콘 표시 (🌙/☀️)
  - 순환 전환 (system → dark → light → system)
  - 시스템 모드 표시

✅ **전역 스타일 업데이트**
- `app/globals.css`: 라이트 모드 기본값 추가
- CSS 변수로 테마 색상 관리
- 부드러운 전환 애니메이션

✅ **컴포넌트 테마 지원**
- 모든 컴포넌트에 `dark:` 클래스 적용
- 하드코딩된 색상 제거

✅ **초기 스크립트**
- `app/layout.tsx`: 페이지 로드 전 테마 적용 (깜빡임 방지)

## 해결되지 않은 것 / 향후 개선 필요

❌ **Tailwind CSS v4 다크 모드 작동 문제**
- HTML에 `dark` 클래스는 추가되지만 스타일이 적용되지 않음
- Tailwind CSS v4의 다크 모드 설정 방식 확인 필요
- `@variant dark (.dark &)` 구문 시도했으나 린터 에러 발생
- 실제로는 클래스가 추가되지만 CSS가 적용되지 않는 상태

**해결 시도:**
1. `@variant dark (.dark &)` 구문 추가 → 린터 에러
2. HTML과 body 모두에 클래스 추가
3. `color-scheme` 속성 설정
4. `data-theme` 속성 추가
5. 디버깅 로그 추가

**현재 상태:**
- 테마 전환 로직은 정상 작동 (HTML 클래스 변경 확인됨)
- Tailwind CSS v4의 다크 모드 variant가 인식되지 않음

## 기술적 세부사항

- **ThemeContext**: React Context API 사용
- **시스템 테마 감지**: `window.matchMedia('(prefers-color-scheme: dark)')`
- **로컬스토리지**: 사용자 선택값 영구 저장
- **SSR 호환**: 마운트 전 기본값 제공

## 향후 개발을 위한 컨텍스트

1. **테마 관리**: `contexts/ThemeContext.tsx`에서 중앙 관리
2. **다크 모드 문제**: Tailwind CSS v4 문서 확인 필요
3. **대안**: CSS 변수를 직접 사용하거나 Tailwind CSS v3로 다운그레이드 고려

## 다음 단계

1. Tailwind CSS v4 다크 모드 설정 방법 재확인
2. 또는 CSS 변수를 직접 사용하여 강제로 다크 모드 스타일 적용
3. 브라우저 개발자 도구에서 실제 CSS 적용 여부 확인


# 당신이 잠든 사이
## 확장 자유과제 프롬프트 정리

**작성일**: 2025-12-11  
**버전**: 1.0

---

## 목차

1. [특정 종목/변동률 조건 알림 설정 UI](#1-특정-종목변동률-조건-알림-설정-ui)
2. [달력 형태로 과거 브리핑 조회](#2-달력-형태로-과거-브리핑-조회)
3. [관심 종목/즐겨찾기 기능 + 로컬스토리지](#3-관심-종목즐겨찾기-기능--로컬스토리지)
4. [종목 검색 실시간 검색 + 자동완성](#4-종목-검색-실시간-검색--자동완성)
5. [공유 기능: 브리핑 이미지 SNS 공유](#5-공유-기능-브리핑-이미지-sns-공유)
6. [애니메이션 숫자 카운팅, 카드 전환 효과](#6-애니메이션-숫자-카운팅-카드-전환-효과)
7. [PWA 설정 - 모바일 앱처럼 설치](#7-pwa-설정---모바일-앱처럼-설치)


---

## 1. 특정 종목/변동률 조건 알림 설정 UI

### 요구사항

#### 1.1 알림 설정 모달/패널
- 메인 화면에 "+ 알림 추가" 버튼 배치
- 모달 또는 사이드 패널 형태로 설정 UI 표시

#### 1.2 종목 선택
- 검색 가능한 드롭다운 (자동완성)
- 최근 검색 종목 표시
- 즐겨찾기 종목 빠른 선택

#### 1.3 조건 설정
- **조건 타입**: 가격 도달 / 변동률(%) / 거래량
- **비교 연산자**: 이상, 이하, 초과, 미만
- **수치 입력**: 숫자 유효성 검증
- **기간 설정**: 1분, 5분, 1시간, 1일 단위

#### 1.4 복합 조건
- AND/OR 조건 추가 버튼
- 최대 3개 조건 조합 가능
- 조건 삭제 및 순서 변경

#### 1.5 알림 방식
- 브라우저 푸시 알림 (권한 요청)
- 사운드 on/off 토글
- 진동 on/off (모바일)

#### 1.6 데이터 관리
- 로컬스토리지에 알림 목록 저장
- 활성/비활성 상태 토글
- 개별 알림 수정/삭제
- 전체 알림 목록 보기

#### 1.7 UX 개선
- 설정 완료 시 확인 토스트 메시지
- 입력 필드 실시간 유효성 검사
- 조건 충족 시 알림 발생 애니메이션
- 알림 히스토리 (최근 10개)

#### 1.8 접근성
- 키보드 네비게이션 지원 (Tab, Enter)
- 모달 닫기: ESC 키 또는 외부 클릭
- 포커스 트랩 (모달 오픈 시)

---

## 2. 달력 형태로 과거 브리핑 조회

### 요구사항

#### 2.1 달력 UI
- 월별 캘린더 뷰 (기본)
- 년/월 네비게이션 (이전/다음 버튼)
- 오늘 날짜로 빠르게 이동하는 버튼
- 주 시작일: 일요일/월요일 설정 가능

#### 2.2 브리핑 데이터 표시
- 브리핑이 있는 날짜에 인디케이터 (dot 또는 숫자 배지)
- 브리핑 개수 표시 (1개: 단일 dot, 2개 이상: 숫자)
- 브리핑 없는 날짜는 비활성화 스타일
- 오늘 날짜 하이라이트 (테두리 또는 배경색)

#### 2.3 날짜 선택 및 조회
- 날짜 클릭 시 해당일 브리핑 목록 표시
- 사이드 패널 또는 모달로 브리핑 내용 표시
- 브리핑 제목, 요약, 생성 시간 표시
- 전체 브리핑 보기 버튼

#### 2.4 필터링 및 검색
- 카테고리별 필터 (경제, 증시, 산업 등)
- 키워드 검색 (제목/내용 검색)
- 필터 적용 시 달력에 즉시 반영
- 필터 초기화 버튼

#### 2.5 뷰 모드 전환
- 월간 뷰 (기본)
- 주간 뷰 (선택 사항)
- 리스트 뷰 (달력 없이 시간순 나열)

#### 2.6 데이터 로딩
- 현재 월의 브리핑 데이터 우선 로딩
- 월 변경 시 해당 월 데이터 fetch
- 로딩 스피너 또는 스켈레톤 UI
- 데이터 없을 때 안내 메시지

#### 2.7 상호작용
- 날짜 hover 시 미리보기 툴팁 (브리핑 개수)
- 드래그로 날짜 범위 선택 (선택 사항)
- 선택된 날짜 강조 표시
- 더블 클릭 시 브리핑 상세 페이지로 이동

#### 2.8 로컬 스토리지
- 마지막 조회 날짜 저장
- 필터 설정 저장
- 뷰 모드 설정 저장

#### 2.9 반응형 디자인
- **모바일**: 달력 축소, 스와이프로 월 이동
- **태블릿**: 사이드바와 달력 동시 표시
- **데스크톱**: 전체 달력 + 상세 패널

#### 2.10 접근성 & UX
- 키보드 화살표로 날짜 네비게이션
- 스크린 리더 지원 (aria-label)
- 부드러운 월 전환 애니메이션
- 빠른 날짜 점프 (날짜 입력 또는 선택)

---

## 3. 관심 종목/즐겨찾기 기능 + 로컬스토리지

### 요구사항

#### 3.1 즐겨찾기 추가/제거
- 종목 리스트에 별 아이콘 (⭐ / ☆) 배치
- 클릭 시 즉시 추가/제거
- 추가 시 토스트 알림 ("관심 종목에 추가되었습니다")
- 제거 시 확인 모달 (선택 사항) 또는 즉시 제거
- 최대 등록 개수 제한 (예: 50개)

#### 3.2 즐겨찾기 목록 UI
- 상단 탭 또는 사이드바에 "관심 종목" 메뉴
- 등록된 종목 리스트 표시
- 종목명, 현재가, 등락률 실시간 표시
- 빈 상태: "관심 종목을 추가해보세요" 안내

#### 3.3 정렬 및 순서 변경
- 드래그 앤 드롭으로 순서 변경
- 정렬 옵션: 등록순 / 종목명순 / 등락률순 / 거래량순
- 정렬 설정 로컬스토리지 저장
- 순서 변경 즉시 저장

#### 3.4 그룹/폴더 관리 (선택 사항)
- 포트폴리오별 그룹 생성 (예: "장기투자", "단타")
- 그룹명 수정/삭제
- 종목을 그룹 간 이동
- 그룹별 필터링

#### 3.5 로컬스토리지 구조
```json
{
  "favorites": [
    {
      "id": "005930",
      "name": "삼성전자",
      "addedAt": "2024-12-10T10:30:00",
      "order": 1,
      "group": "기본"
    }
  ],
  "settings": {
    "sortBy": "order",
    "maxItems": 50
  }
}
```

#### 3.6 데이터 동기화
- 로컬스토리지 변경 시 즉시 저장
- 페이지 로드 시 로컬스토리지에서 복원
- 저장 실패 시 에러 처리 (용량 초과 등)
- 백업/복원 기능 (JSON 다운로드/업로드)

#### 3.7 검색 및 빠른 추가
- 종목 검색 모달/드롭다운
- 자동완성 지원 (종목명/코드)
- 검색 결과에서 바로 즐겨찾기 추가
- 최근 검색어 저장 (로컬스토리지)

#### 3.8 일괄 관리
- 전체 선택 체크박스
- 선택 항목 일괄 삭제
- 선택 항목 그룹 이동
- "전체 삭제" 버튼 (확인 모달 필수)

#### 3.9 시각적 피드백
- 추가/제거 시 부드러운 애니메이션
- 현재 즐겨찾기 상태 명확히 표시
- 드래그 중 시각적 효과 (그림자, 투명도)
- 등락률에 따른 색상 (빨강/파랑)

#### 3.10 알림 연동
- 즐겨찾기 종목 가격 알림 설정 연동
- 관심 종목 변동 시 배지/알림
- 장 마감 후 당일 리포트

#### 3.11 내보내기/가져오기
- JSON 파일로 내보내기
- 다른 기기에서 가져오기
- CSV 형식 지원 (선택 사항)
- 클립보드 복사 (종목 코드 리스트)

#### 3.12 성능 최적화
- 대량 종목 등록 시 가상 스크롤
- 로컬스토리지 크기 모니터링
- 주기적인 데이터 정리 (오래된 메타데이터)
- 디바운싱 적용 (순서 변경 시)

#### 3.13 접근성
- 키보드로 즐겨찾기 추가/제거 (Enter)
- 스크린 리더 지원 ("즐겨찾기 추가됨")
- 포커스 표시 명확히
- 색맹 모드 지원 (등락률 표시)

#### 3.14 예외 처리
- 로컬스토리지 사용 불가 시 세션스토리지 대체
- 용량 초과 시 경고 및 정리 제안
- 중복 추가 방지
- 존재하지 않는 종목 처리

#### 3.15 사용자 분석 (선택 사항)
- 가장 많이 추가된 종목 TOP 10
- 평균 관심 종목 개수
- 자주 제거되는 종목 패턴

---

## 4. 종목 검색 실시간 검색 + 자동완성

### 기능 설명

**목적**
- 사용자가 관심 있는 종목을 빠르게 찾아 상세 정보를 확인하고 즐겨찾기에 추가
- 타이핑 중 실시간으로 종목을 추천하여 검색 시간 단축
- UX 개선

**사용자 시나리오**
1. 헤더 또는 메인 화면 상단의 검색창 클릭
2. "삼성" 또는 "005930" 입력 → 실시간 자동완성 표시
3. 화살표 키 또는 마우스로 종목 선택
4. 선택한 종목의 상세 정보 모달 표시 또는 즐겨찾기 추가

### 요구사항

#### 4.1 검색 입력창
- 헤더 우측 또는 메인 상단에 돋보기 아이콘(🔍) 배치
- 클릭 시 검색창 확장 또는 모달 표시
- placeholder: "종목명 또는 종목코드 입력"
- 입력 시 즉시 자동완성 결과 표시 (디바운싱 300ms)

#### 4.2 자동완성 드롭다운
- 입력값과 매칭되는 종목 최대 8개 표시
- 각 항목: **종목명** (굵게) + 종목코드 (회색) + 현재가 + 등락률
- 매칭된 텍스트 하이라이트 (볼드 또는 색상)
- 결과 없을 시: "검색 결과가 없습니다" 메시지
- 키보드 화살표(↑↓)로 선택, Enter로 확정

#### 4.3 검색 히스토리
- 최근 검색어 5개 로컬스토리지 저장
- 검색창 포커스 시 최근 검색어 표시
- 각 항목에 삭제 버튼 (×)
- "전체 삭제" 옵션

#### 4.4 목업 데이터 구조
```javascript
const mockStocks = [
  { code: "005930", name: "삼성전자", price: 71500, change: 2.3 },
  { code: "000660", name: "SK하이닉스", price: 138000, change: -1.2 },
  { code: "035420", name: "NAVER", price: 215000, change: 3.5 }
]
```

#### 4.5 검색 결과 액션
- 종목 클릭 시 상세 정보 모달 표시
- 각 항목 우측에 별(⭐) 아이콘으로 즐겨찾기 빠른 추가
- ESC 키로 검색창 닫기
- 외부 클릭 시 드롭다운 닫기

#### 4.6 검색 방식
- 종목명 초성 검색 지원 (예: `ㅅㅅㅈㅈ` → 삼성전자)
- 종목코드 부분 일치 (예: `0059` → 005930)
- 한글/영문 혼용 검색 가능
- 대소문자 구분 없음

#### 4.7 성능 최적화
- 입력 디바운싱 (300ms)
- 2글자 이상부터 검색 실행
- 가상 스크롤 (결과 많을 경우)
- 로딩 인디케이터 (검색 중)

#### 4.8 모바일 대응
- 모바일에서 검색창 클릭 시 전체화면 모달
- 하단 고정 검색창
- 스와이프로 모달 닫기
- 자동 키보드 포커스

### 디자인

- 기존 UI와 일관된 스타일 (다크/라이트 모드 대응)
- 검색창: 투명 배경 + 테두리, 포커스 시 강조 효과
- 드롭다운: 그림자 효과, 카드 스타일
- 등락률: 빨강(상승) / 파랑(하락) 색상
- 호버 효과: 배경색 변경 (부드러운 transition)
- 로딩 상태: 스피너 또는 스켈레톤 UI
- 애니메이션: 드롭다운 슬라이드 다운 (0.2s ease)

### 참고

- 목업 데이터 사용 가능
- 외부 라이브러리: Fuse.js (퍼지 검색)
- Headless UI 또는 Radix UI 권장
- 한글 초성 검색: 커스텀 함수 또는 라이브러리

---

## 5. 공유 기능: 브리핑 이미지 SNS 공유

### 기능 설명

**목적**
- 아침 브리핑을 이미지로 변환하여 SNS에 쉽게 공유
- 시각적으로 정리된 카드 형태로 생성
- 서비스 인지도 향상 및 바이럴 마케팅

**사용자 시나리오**
1. 아침 브리핑 확인 후 "공유" 버튼 클릭
2. 브리핑 내용이 자동으로 이미지 카드로 변환
3. 미리보기 표시
4. 카카오톡/트위터/인스타그램 등 SNS 선택하여 공유
5. 또는 이미지 다운로드

### 요구사항

#### 5.1 공유 버튼 배치
- 각 브리핑 카드 우측 상단에 공유 아이콘 (🔗 또는 📤)
- 브리핑 상세 페이지 하단에 "이 브리핑 공유하기" 버튼
- 버튼 호버 시 "SNS에 공유하기" 툴팁
- 클릭 시 공유 옵션 모달 또는 바텀시트 표시

#### 5.2 이미지 생성 (html-to-image 또는 Canvas)
- 브리핑 제목, 요약 내용 (최대 3줄)
- 주요 수치 또는 하이라이트 (큰 폰트로 강조)
- 생성 날짜/시간 표시
- 하단 워터마크: "당신이 잠든 사이 | 오전 7시 브리핑"
- 로고 또는 서비스명 삽입
- 이미지 사이즈:
  - 1080x1080 (인스타그램)
  - 1200x630 (트위터/페이스북)

#### 5.3 공유 채널
| 채널 | 구현 방법 |
|------|-----------|
| 카카오톡 | 카카오 공유 SDK |
| 트위터/X | Web Intent API |
| 페이스북 | Facebook Share Dialog |
| 링크 복사 | 클립보드 + 토스트 알림 |
| 이미지 다운로드 | PNG 파일 저장 |
| 네이티브 공유 | Web Share API (모바일) |

#### 5.4 이미지 템플릿 디자인
- 그라데이션 배경 (브랜드 컬러)
- 제목: 32px 볼드, 흰색
- 본문: 20px, 90% 투명도
- 주요 수치: 48px, 형광 하이라이트
- 하단 워터마크: 16px, 50% 투명도
- QR 코드 (선택 사항): 앱/웹 접속용

#### 5.5 공유 전 미리보기
- 생성된 이미지 모달로 미리보기
- "수정하기" 버튼: 제목/내용 편집 가능
- "다시 생성" 버튼: 템플릿 재생성
- "취소" / "공유하기" 액션 버튼

#### 5.6 공유 추적
- 공유 버튼 클릭 수 로깅
- 어떤 채널로 공유했는지 추적
- 가장 많이 공유된 브리핑 TOP 5
- 로컬스토리지에 공유 히스토리 저장

#### 5.7 텍스트 공유 옵션
- 이미지 외에 텍스트만 공유 옵션
- 형식: "오늘의 브리핑: [제목] - [요약] via 당신이 잠든 사이"
- 서비스 URL 자동 포함

#### 5.8 Open Graph 메타 태그
- URL 공유 시 미리보기 최적화
- `og:title`, `og:description`, `og:image` 설정
- 트위터 카드 메타 태그 추가
- 동적으로 브리핑별 OG 태그 생성

#### 5.9 에러 처리
- 이미지 생성 실패 시 대체 텍스트 공유
- 브라우저 미지원 기능 안내
- 권한 거부 시 안내 메시지
- 네트워크 오류 시 재시도 옵션

#### 5.10 성능 최적화
- 이미지 생성 로딩 인디케이터
- 캔버스 렌더링 최적화
- 생성된 이미지 임시 캐싱
- 대용량 이미지 압축 (80% 품질)

#### 5.11 접근성
- 키보드로 공유 옵션 탐색 (Tab)
- 스크린 리더 지원 ("공유 버튼")
- 고대비 모드 지원
- alt 텍스트 자동 생성

### 디자인

- 기존 UI와 일관된 스타일 (다크/라이트 모드)
- 공유 버튼: 아이콘 + 텍스트, 부드러운 그림자
- 공유 모달: 중앙 정렬, 반투명 배경
- SNS 아이콘: 각 플랫폼 브랜드 컬러
- 이미지 카드: 고급스러운 그라데이션, 여백 충분
- 애니메이션: 공유 버튼 클릭 시 펄스 효과
- 미리보기: 실제 SNS 포스트처럼 프레임 적용
- 호버 효과: 각 SNS 버튼 색상 변화 (0.3s)

### 참고

- 목업 데이터 사용 가능
- 외부 라이브러리:
  - `html-to-image`: HTML → PNG/JPEG
  - `canvas2image`: Canvas 이미지 저장
  - `react-share`: SNS 공유 컴포넌트
  - Kakao SDK, Facebook SDK
- Web Share API (모바일 네이티브)
- 이미지 생성 시 웹폰트 로딩 완료 대기

---

## 6. 애니메이션 숫자 카운팅, 카드 전환 효과

### 기능 설명

**목적**
- 숫자 데이터 동적 카운팅으로 시각적 몰입감 제공
- 브리핑 카드 전환 시 부드러운 애니메이션으로 프리미엄 UX
- 중요 수치 변화에 사용자 시선 집중

**사용자 시나리오**
1. 페이지 진입 시 주요 수치 0에서 실제 값까지 카운팅
2. 브리핑 카드 스크롤/스와이프 시 페이드, 슬라이드 효과
3. 주가 변동, 등락률 핵심 지표 시각적 강조
4. 매끄러운 애니메이션으로 사용자 경험 개선

### 요구사항

#### 6.1 숫자 카운팅 애니메이션
- 페이지 로드 또는 뷰포트 진입 시 자동 시작
- 0 또는 이전 값 → 목표 값까지 부드럽게 카운팅
- 애니메이션 속도: 1.5~2초 (숫자 크기 따라 조정)
- Easing 함수: ease-out 또는 cubic-bezier
- 소수점, 천 단위 콤마 포맷팅 유지

#### 6.2 카운팅 대상 요소
- 주요 지표: 코스피 지수, 달러 환율, 비트코인 가격
- 변동률: +2.3% → 카운팅 + 색상 변화
- 거래량: 1,234,567주 → 천 단위 구분
- 브리핑 개수: "오늘 5개의 브리핑"
- 통계 수치: "전일 대비 +150포인트"

#### 6.3 카운팅 효과 세부사항
| 타입 | 예시 |
|------|------|
| 정수 | 0 → 12,345 (콤마 포함) |
| 소수점 | 0.00 → 1,234.56 (2자리) |
| 퍼센트 | 0% → +3.2% (부호 + 색상) |
| 큰 숫자 | 1.2M, 3.4B (단위 축약) |
| 음수 | 빨간색 카운팅 |

#### 6.4 카드 전환 애니메이션
- **페이드 인/아웃**: 투명도 0 → 100%
- **슬라이드**: 좌/우/상/하에서 진입
- **스케일**: 0.9배 → 1배 확대
- **로테이트**: 살짝 회전하며 등장
- **스택 효과**: 카드가 쌓이듯 전환
- 전환 시간: 0.4~0.6초

#### 6.5 카드 전환 트리거
- 페이지네이션 버튼 클릭
- 스와이프 제스처 (모바일)
- 키보드 화살표 (← →)
- 자동 슬라이드 (5초마다, 선택)
- 브리핑 카테고리 변경

#### 6.6 인터랙션 피드백
- 호버: 카드 살짝 확대 (scale: 1.02)
- 클릭: 리플 효과 또는 펄스
- 드래그: 그림자 강화, 투명도 80%
- 스와이프: 방향 표시 화살표 힌트

#### 6.7 스크롤 애니메이션 (Intersection Observer)
- 화면에 요소 보이면 자동 실행
- 한 번만 실행 또는 반복 설정
- 순차적 애니메이션: 요소별 0.1초 딜레이
- 위에서 아래로 페이드 인

#### 6.8 성능 최적화
- `requestAnimationFrame` 사용
- GPU 가속 (transform, opacity)
- will-change 속성 적용
- 동시 실행 애니메이션 제한 (최대 5개)
- 저사양 기기 감지 시 애니메이션 단순화

#### 6.9 접근성 및 사용자 설정
- `prefers-reduced-motion` 감지
- 모션 민감 사용자: 애니메이션 비활성화
- 설정에서 애니메이션 on/off 토글
- 스크린 리더: 최종 값만 읽기

#### 6.10 라이브러리 활용
| 라이브러리 | 용도 |
|-----------|------|
| CountUp.js | 숫자 카운팅 |
| Framer Motion | React 애니메이션 |
| GSAP | 타임라인 애니메이션 |
| Swiper.js | 카드 스와이프 |
| AOS | 스크롤 애니메이션 |

#### 6.11 다크/라이트 모드 대응
- 애니메이션 일관성 유지
- 그림자 색상 모드별 조정
- 강조 색상: 다크 모드에서 더 선명

#### 6.12 에러 처리
- 애니메이션 실패 시 즉시 최종 값 표시
- 브라우저 미지원 시 폴백
- 타임아웃 설정 (3초 이내 완료)

### 디자인

- 기존 UI와 일관된 스타일 (다크/라이트 모드)
- 숫자 카운팅: 모노스페이스 폰트
- 상승: 빨강(#FF4444) + 위쪽 화살표
- 하락: 파랑(#4444FF) + 아래쪽 화살표
- 카드 그림자: 전환 중 강화 (0 4px 20px rgba(0,0,0,0.15))
- 전환 커브: cubic-bezier(0.4, 0.0, 0.2, 1)
- 페이지네이션: 활성 점 강조
- 로딩: 스켈레톤 UI
- 호버: 부드러운 scale + 그림자 변화

### 참고

- 목업 데이터 사용 가능
- 외부 라이브러리:
  - CountUp.js
  - Framer Motion
  - GSAP
  - react-spring
  - Swiper.js
  - AOS
- Intersection Observer API
- CSS `@media (prefers-reduced-motion)` 필수
- 60fps 유지 목표

---

## 7. PWA 설정 - 모바일 앱처럼 설치

### 기능 설명

**목적**
- 브라우저 없이 앱처럼 사용 가능
- 홈 화면 아이콘 추가로 빠른 접근
- 오프라인 상태에서도 이전 브리핑 열람
- 매일 아침 7시 브리핑 푸시 알림 (선택)

**사용자 시나리오**
1. 모바일/데스크톱에서 서비스 접속
2. "앱으로 설치하기" 배너 표시
3. 설치 버튼 클릭 → 홈 화면에 아이콘 추가
4. 아이콘 클릭 시 브라우저 UI 없이 전체화면 실행
5. 오프라인에서도 캐시된 브리핑 확인

### 요구사항

#### 7.1 Manifest 파일 (manifest.json)
```json
{
  "name": "당신이 잠든 사이 - 아침 브리핑",
  "short_name": "잠든사이",
  "description": "매일 아침 7시, 증시·환율·뉴스 브리핑",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#1a1a2e",
  "background_color": "#0f0f1e",
  "orientation": "portrait-primary",
  "icons": [
    { "src": "/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icon-512.png", "sizes": "512x512", "type": "image/png" },
    { "src": "/icon-maskable.png", "sizes": "512x512", "purpose": "maskable" }
  ]
}
```

#### 7.2 Service Worker 등록 및 캐싱
- 오프라인 지원: HTML, CSS, JS 정적 파일 캐싱
- 브리핑 데이터 캐싱 (최근 7일치)
- 이미지, 폰트 리소스 캐싱
- **Cache-First 전략**: 오프라인 우선 로딩
- **Network-First 전략**: 최신 브리핑 데이터
- 캐시 버전 관리 및 자동 업데이트

#### 7.3 설치 프롬프트 UI
- **배너 위치**: 페이지 하단 고정 (첫 방문 시)
- **배너 내용**: "앱으로 설치하고 매일 아침 브리핑 받기"
- **액션 버튼**: "설치하기" / "나중에"
- **재표시 로직**: 3회 방문 후 또는 7일 후 다시 표시
- **이미 설치된 경우**: 배너 숨김
- **설정 메뉴**: "앱 설치" 옵션 항상 노출

#### 7.4 플랫폼별 안내
| 플랫폼 | 안내 방법 |
|--------|-----------|
| Android Chrome | 자동 설치 프롬프트 |
| iOS Safari | 수동 설치 가이드 모달 ("공유 → 홈 화면에 추가") |
| Desktop Chrome/Edge | 주소창 설치 아이콘 |
| 삼성 인터넷 | 자동 프롬프트 지원 |

#### 7.5 iOS 메타 태그 설정
```html
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="잠든사이">
<link rel="apple-touch-icon" href="/icon-180.png">
```

#### 7.6 설치 후 경험
- 스플래시 스크린: 로고 + "당신이 잠든 사이" 텍스트
- 상태바 색상: 다크 테마에 맞춰 블랙
- 전체화면 모드: 브라우저 UI 숨김
- 앱 아이콘 배지: 읽지 않은 브리핑 개수 (선택)

#### 7.7 오프라인 페이지
- 인터넷 연결 끊김 감지
- 커스텀 오프라인 페이지 표시
- 내용: "오프라인 상태입니다. 최근 브리핑을 확인하세요"
- 캐시된 브리핑 목록 표시
- 재연결 시도 버튼
- 네트워크 복구 시 자동 새로고침

#### 7.8 Service Worker 전략
```javascript
// 정적 리소스: Cache First
// API 데이터: Network First (fallback to Cache)
// 이미지: Cache First (1주일 유효)
// 버전 업데이트 시 자동 캐시 클리어
```

#### 7.9 업데이트 알림
- Service Worker 업데이트 감지
- 상단 배너: "새 버전이 있습니다. 업데이트하기"
- 클릭 시 즉시 새로고침
- 백그라운드 자동 업데이트 (선택)
- 업데이트 로그 표시

#### 7.10 푸시 알림 (선택 사항)
- 매일 아침 7시 브리핑 알림
- 중요 속보 실시간 알림
- 브라우저 푸시 권한 요청
- 알림 설정 on/off 토글
- 백그라운드 알림 수신

#### 7.11 설치 추적 및 분석
- `beforeinstallprompt` 이벤트 감지
- `appinstalled` 이벤트 로깅
- 설치율 추적 (Google Analytics)
- 플랫폼별 설치 통계
- 사용자 이탈 지점 분석

#### 7.12 로컬스토리지 데이터
- 설치 프롬프트 표시 횟수
- 마지막 프롬프트 표시 날짜
- 사용자 설치 거부 여부
- PWA 설치 상태 (installed/not-installed)

#### 7.13 성능 최적화
| 항목 | 목표 |
|------|------|
| Lighthouse PWA | 90+ |
| 초기 로딩 | < 3초 |
| 이미지 로딩 | Lazy loading |
| 코드 스플리팅 | ✓ |
| 압축 | Gzip/Brotli |

#### 7.14 아이콘 디자인
- 192x192, 512x512 PNG (필수)
- Maskable icon (Android 적응형)
- 파비콘 (16x16, 32x32)
- iOS 전용 (180x180)
- 심플한 로고 + 브랜드 컬러

#### 7.15 에러 처리
- Service Worker 등록 실패 시 폴백
- 캐시 쓰기 실패 처리
- 용량 초과 시 오래된 캐시 삭제
- HTTPS 필수 (localhost 제외)

### 디자인

- 기존 UI와 일관된 스타일 (다크/라이트 모드)
- 설치 배너: 그라데이션 배경, 부드러운 그림자
- 버튼: 브랜드 컬러 (보라/파랑), 둥근 모서리
- 스플래시 스크린: 미니멀 로고 + 어두운 배경
- iOS 안내 모달: 단계별 스크린샷
- 오프라인 페이지: 일러스트 + 친근한 메시지
- 업데이트 배너: 상단 고정, 슬라이드 다운
- 아이콘: 심플하고 인지도 높은 디자인 (별, 달, 신문)

### 참고

- 목업 데이터 사용 가능
- 외부 라이브러리:
  - **Workbox**: Service Worker
  - **next-pwa**: Next.js PWA 플러그인
  - **vite-plugin-pwa**: Vite PWA 플러그인
- Service Worker는 HTTPS에서만 작동 (localhost 제외)
- iOS는 PWA 기능 제한적 (푸시 알림 미지원, iOS 16.4+에서 일부 지원)
- Manifest 검증: https://manifest-validator.appspot.com
- Lighthouse 테스트로 PWA 체크리스트 확인



<div align="center">

**🌙 당신이 잠든 사이**

매일 아침 7시, 증시·환율·뉴스를 한눈에

</div>

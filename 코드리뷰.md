# ì½”ë“œ ë¦¬ë·° ë³´ê³ ì„œ

**ë¦¬ë·° ì¼ì‹œ**: 2025-12-11  
**í”„ë¡œì íŠ¸**: ë‹¹ì‹ ì´ ì ë“  ì‚¬ì´ - ëŒ€ì‹œë³´ë“œ  
**ë¦¬ë·° ë²”ìœ„**: ì „ì²´ ì½”ë“œë² ì´ìŠ¤

## ğŸ“Š ì „ì²´ í‰ê°€

**ì¢…í•© ì ìˆ˜**: â­â­â­â­ (4/5)

ì „ë°˜ì ìœ¼ë¡œ ì˜ êµ¬ì¡°í™”ëœ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. Next.js 16ê³¼ TypeScriptë¥¼ ì ì ˆíˆ í™œìš©í•˜ê³  ìˆìœ¼ë©°, PWA ê¸°ëŠ¥ë„ ì˜ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ íƒ€ì… ì•ˆì •ì„±, ì—ëŸ¬ ì²˜ë¦¬, ì„±ëŠ¥ ìµœì í™” ì¸¡ë©´ì—ì„œ ê°œì„ ì˜ ì—¬ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

---

## âœ… ì˜ êµ¬í˜„ëœ ë¶€ë¶„

### 1. í”„ë¡œì íŠ¸ êµ¬ì¡°
- âœ… ì»´í¬ë„ŒíŠ¸, í›…, ìœ í‹¸ë¦¬í‹°ê°€ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë¨
- âœ… íƒ€ì… ì •ì˜ê°€ ì¤‘ì•™í™”ë˜ì–´ ìˆìŒ (`types/index.ts`)
- âœ… ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ìœ í‹¸ë¦¬í‹°ê°€ ëª¨ë“ˆí™”ë˜ì–´ ìˆìŒ

### 2. PWA êµ¬í˜„
- âœ… Service Worker ì„¤ì •ì´ ì˜¬ë°”ë¦„
- âœ… Manifest íŒŒì¼ì´ ì™„ì „í•¨
- âœ… í”Œë«í¼ë³„ ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ êµ¬í˜„
- âœ… ì˜¤í”„ë¼ì¸ í˜ì´ì§€ ì œê³µ

### 3. ì ‘ê·¼ì„±
- âœ… `prefers-reduced-motion` ì§€ì›
- âœ… í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ê³ ë ¤
- âœ… ARIA ë ˆì´ë¸” ì‚¬ìš©

### 4. ì½”ë“œ í’ˆì§ˆ
- âœ… í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì™€ Hooks ì‚¬ìš©
- âœ… ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
- âœ… ì¼ê´€ëœ ë„¤ì´ë° ì»¨ë²¤ì…˜

---

## âš ï¸ ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„

### ğŸ”´ ë†’ì€ ìš°ì„ ìˆœìœ„

#### 1. íƒ€ì… ì•ˆì •ì„± ë¬¸ì œ

**ë¬¸ì œì :**
```typescript
// components/AnimatedCard.tsx:98
ref={elementRef as any}

// components/PWAInstallPrompt.tsx:20
const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera;

// components/AlertList.tsx:13
stocks: any[];

// utils/shareUtils.ts:221
} catch (error: any) {
```

**ê°œì„  ë°©ì•ˆ:**
```typescript
// AnimatedCard.tsx
import { RefObject } from 'react';
import { MotionDiv } from 'framer-motion';

ref={elementRef as RefObject<HTMLDivElement>}

// PWAInstallPrompt.tsx
interface WindowWithOpera extends Window {
  opera?: string;
}
const userAgent = navigator.userAgent || navigator.vendor || (window as WindowWithOpera).opera;

// AlertList.tsx
import { Stock } from '@/types';
stocks: Stock[];

// shareUtils.ts
} catch (error: unknown) {
  const message = error instanceof Error ? error.message : 'Unknown error';
  console.error('Failed to share:', message);
}
```

#### 2. í”„ë¡œë•ì…˜ ì½”ë“œì— ë””ë²„ê¹… ë¡œê·¸ ë‚¨ì•„ìˆìŒ

**ë¬¸ì œì :**
```typescript
// contexts/ThemeContext.tsx:89-96
console.log('ğŸ¨ Theme changed:', { ... });

// components/ThemeToggle.tsx:19, 26
console.log('ğŸ”„ Toggling theme:', ...);
console.log('âœ… After toggle:', ...);
```

**ê°œì„  ë°©ì•ˆ:**
```typescript
// ê°œë°œ í™˜ê²½ì—ì„œë§Œ ë¡œê·¸ ì¶œë ¥
if (process.env.NODE_ENV === 'development') {
  console.log('ğŸ¨ Theme changed:', { ... });
}

// ë˜ëŠ” ë¡œê¹… ìœ í‹¸ë¦¬í‹° ì‚¬ìš©
// utils/logger.ts
export const logger = {
  log: (...args: unknown[]) => {
    if (process.env.NODE_ENV === 'development') {
      console.log(...args);
    }
  },
  error: (...args: unknown[]) => {
    console.error(...args);
  },
};
```

#### 3. ì—ëŸ¬ ì²˜ë¦¬ ê°œì„  í•„ìš”

**ë¬¸ì œì :**
```typescript
// utils/alertStorage.ts:30
} catch (error) {
  console.error('Failed to save alert:', error);
  // ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°± ì—†ìŒ
}
```

**ê°œì„  ë°©ì•ˆ:**
```typescript
export function saveAlert(alert: AlertSettings): { success: boolean; error?: string } {
  if (typeof window === 'undefined') {
    return { success: false, error: 'Client-side only' };
  }
  try {
    const alerts = getAlerts();
    const index = alerts.findIndex((a) => a.id === alert.id);
    if (index >= 0) {
      alerts[index] = alert;
    } else {
      alerts.push(alert);
    }
    localStorage.setItem(ALERT_STORAGE_KEY, JSON.stringify(alerts));
    return { success: true };
  } catch (error) {
    const message = error instanceof Error ? error.message : 'Unknown error';
    console.error('Failed to save alert:', error);
    return { success: false, error: message };
  }
}
```

### ğŸŸ¡ ì¤‘ê°„ ìš°ì„ ìˆœìœ„

#### 4. ì„±ëŠ¥ ìµœì í™”

**ë¬¸ì œì :**
- `app/page.tsx`ì—ì„œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë™ì‹œì— ë Œë”ë§ë¨
- ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ê°€ëŠ¥ì„±

**ê°œì„  ë°©ì•ˆ:**
```typescript
// React.memo ì‚¬ìš©
import { memo } from 'react';

export default memo(function Home() {
  // ...
});

// useMemoë¡œ ë¬´ê±°ìš´ ê³„ì‚° ìµœì í™”
const allStocks = useMemo(() => mockTrendingStocks, []);

// ë™ì  importë¡œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
const BriefingCalendar = dynamic(() => import('@/components/BriefingCalendar'), {
  loading: () => <div>Loading...</div>,
});
```

#### 5. ì¤‘ë³µ ì½”ë“œ ì œê±°

**ë¬¸ì œì :**
```typescript
// ì—¬ëŸ¬ íŒŒì¼ì—ì„œ ë°˜ë³µë˜ëŠ” íŒ¨í„´
if (typeof window === 'undefined') return [];
try {
  const stored = localStorage.getItem(KEY);
  return stored ? JSON.parse(stored) : [];
} catch {
  return [];
}
```

**ê°œì„  ë°©ì•ˆ:**
```typescript
// utils/storage.ts
export function safeGetStorage<T>(key: string, defaultValue: T): T {
  if (typeof window === 'undefined') return defaultValue;
  try {
    const stored = localStorage.getItem(key);
    return stored ? JSON.parse(stored) : defaultValue;
  } catch {
    return defaultValue;
  }
}

export function safeSetStorage<T>(key: string, value: T): boolean {
  if (typeof window === 'undefined') return false;
  try {
    localStorage.setItem(key, JSON.stringify(value));
    return true;
  } catch {
    return false;
  }
}
```

#### 6. PWAUpdatePromptì˜ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±

**ë¬¸ì œì :**
```typescript
// components/PWAUpdatePrompt.tsx:46-50
const interval = setInterval(() => {
  if (registration) {
    registration.update();
  }
}, 60 * 60 * 1000);
```

**ê°œì„  ë°©ì•ˆ:**
```typescript
useEffect(() => {
  // ... ê¸°ì¡´ ì½”ë“œ ...
  
  const interval = setInterval(() => {
    navigator.serviceWorker.ready.then((reg) => {
      reg.update();
    });
  }, 60 * 60 * 1000);

  return () => {
    clearInterval(interval);
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë„ ì •ë¦¬
  };
}, []); // registration ì˜ì¡´ì„± ì œê±°
```

### ğŸŸ¢ ë‚®ì€ ìš°ì„ ìˆœìœ„

#### 7. ì ‘ê·¼ì„± ê°œì„ 

**ë¬¸ì œì :**
- ì¼ë¶€ ë²„íŠ¼ì— aria-label ëˆ„ë½
- í¬ì»¤ìŠ¤ ê´€ë¦¬ ê°œì„  í•„ìš”

**ê°œì„  ë°©ì•ˆ:**
```typescript
<button
  onClick={handleInstall}
  aria-label="ì•± ì„¤ì¹˜í•˜ê¸°"
  className="..."
>
  ì„¤ì¹˜í•˜ê¸°
</button>

// ëª¨ë‹¬ ì—´ë¦´ ë•Œ í¬ì»¤ìŠ¤ íŠ¸ë©
useEffect(() => {
  if (isOpen) {
    const firstFocusable = modalRef.current?.querySelector(
      'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
    );
    (firstFocusable as HTMLElement)?.focus();
  }
}, [isOpen]);
```

#### 8. í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

**ë¬¸ì œì :**
- í•˜ë“œì½”ë”©ëœ ê°’ë“¤ (ì˜ˆ: 3ì´ˆ, 7ì¼, 10ê°œ ë“±)

**ê°œì„  ë°©ì•ˆ:**
```typescript
// config/constants.ts
export const PWA_CONFIG = {
  PROMPT_DELAY: 3000, // 3ì´ˆ
  PROMPT_COOLDOWN_DAYS: 7,
  MAX_PROMPT_COUNT: 3,
  UPDATE_CHECK_INTERVAL: 60 * 60 * 1000, // 1ì‹œê°„
} as const;
```

#### 9. í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¶€ì¬

**ê°œì„  ë°©ì•ˆ:**
```typescript
// utils/__tests__/alertStorage.test.ts
import { saveAlert, getAlerts, deleteAlert } from '../alertStorage';

describe('alertStorage', () => {
  beforeEach(() => {
    localStorage.clear();
  });

  it('should save and retrieve alerts', () => {
    const alert: AlertSettings = { /* ... */ };
    saveAlert(alert);
    const alerts = getAlerts();
    expect(alerts).toHaveLength(1);
    expect(alerts[0]).toEqual(alert);
  });
});
```

---

## ğŸ“ êµ¬ì²´ì ì¸ ìˆ˜ì • ì‚¬í•­

### 1. `components/AnimatedCard.tsx`
```typescript
// í˜„ì¬: ref={elementRef as any}
// ê°œì„ :
import { RefObject } from 'react';

ref={elementRef as RefObject<HTMLDivElement>}
```

### 2. `components/PWAInstallPrompt.tsx`
```typescript
// í˜„ì¬: (window as any).opera
// ê°œì„ :
interface WindowWithOpera extends Window {
  opera?: string;
  MSStream?: unknown;
}
const windowWithOpera = window as WindowWithOpera;
const userAgent = navigator.userAgent || navigator.vendor || windowWithOpera.opera;
```

### 3. `contexts/ThemeContext.tsx`
```typescript
// í˜„ì¬: console.log ë‚¨ì•„ìˆìŒ
// ê°œì„ : ê°œë°œ í™˜ê²½ì—ì„œë§Œ ë¡œê·¸ ë˜ëŠ” ì™„ì „ ì œê±°
```

### 4. `utils/alertStorage.ts`
```typescript
// í˜„ì¬: ì—ëŸ¬ ë°œìƒ ì‹œ ì¡°ìš©íˆ ì‹¤íŒ¨
// ê°œì„ : ë°˜í™˜ê°’ìœ¼ë¡œ ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ ì „ë‹¬
```

### 5. `app/layout.tsx`
```typescript
// í˜„ì¬: <head> íƒœê·¸ì— ì¤‘ë³µ ë©”íƒ€ íƒœê·¸
// ê°œì„ : Next.js metadata APIë§Œ ì‚¬ìš©
```

---

## ğŸ¯ ê¶Œì¥ ì‘ì—… ìˆœì„œ

1. **ì¦‰ì‹œ ìˆ˜ì •** (ë³´ì•ˆ/ì•ˆì •ì„±)
   - [ ] `any` íƒ€ì… ì œê±°
   - [ ] í”„ë¡œë•ì…˜ console.log ì œê±°
   - [ ] ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 

2. **ë‹¨ê¸° ê°œì„ ** (1-2ì£¼)
   - [ ] ì¤‘ë³µ ì½”ë“œ ë¦¬íŒ©í† ë§
   - [ ] ì„±ëŠ¥ ìµœì í™” (memo, useMemo)
   - [ ] ì ‘ê·¼ì„± ê°œì„ 

3. **ì¤‘ê¸° ê°œì„ ** (1ê°œì›”)
   - [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
   - [ ] í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
   - [ ] ë¬¸ì„œí™” ê°œì„ 

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [TypeScript Best Practices](https://typescript-eslint.io/rules/)
- [React Performance Optimization](https://react.dev/learn/render-and-commit)
- [PWA Best Practices](https://web.dev/pwa-checklist/)
- [Accessibility Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)

---

## ğŸ’¡ ì¶”ê°€ ì œì•ˆ

1. **ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ì¶”ê°€**
   ```typescript
   // components/ErrorBoundary.tsx
   export class ErrorBoundary extends React.Component {
     // ...
   }
   ```

2. **ë¡œë”© ìƒíƒœ ê´€ë¦¬**
   ```typescript
   // hooks/useLoading.ts
   export function useLoading() {
     const [loading, setLoading] = useState(false);
     // ...
   }
   ```

3. **API í´ë¼ì´ì–¸íŠ¸ ì¶”ìƒí™”**
   ```typescript
   // utils/api.ts
   export const api = {
     get: async <T>(url: string): Promise<T> => { /* ... */ },
     post: async <T>(url: string, data: unknown): Promise<T> => { /* ... */ },
   };
   ```

---

**ë¦¬ë·°ì–´**: AI Assistant  
**ë‹¤ìŒ ë¦¬ë·° ì˜ˆì •ì¼**: ì½”ë“œ ìˆ˜ì • í›„

